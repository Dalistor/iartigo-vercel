
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Debug Canvas API</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; }
    </style>
</head>
<body>
    <div class="container">
        <h2>üîç Debug Canvas API Output</h2>
        <p>HTML gerado pela API process-charts-test:</p>
        
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <div style="margin: 40px 0; text-align: center; padding: 0 20px;">
      <div style="width: 100%; max-width: 600px; height: 400px; margin: 0 auto; background: white; border-radius: 12px; box-shadow: 0 4px 16px rgba(0,0,0,0.1); padding: 30px;">
        <canvas id="chart_debug-chart-2_1754440098163_6lk75y28z" style="width: 100%; height: 100%; border: 1px solid #ddd;"></canvas>
      </div>
      <p style="margin: 20px 0 10px 0; font-style: italic; color: #6B7280; font-size: 14px; text-align: center; max-width: 600px; margin-left: auto; margin-right: auto;">
        Teste de debug para canvas vazio
      </p>
    </div>
    <script>
      (function() {
        let attempts = 0;
        function initChart() {
          attempts++;
          console.log('Tentativa ' + attempts + ' de inicializar gr√°fico chart_debug-chart-2_1754440098163_6lk75y28z');
          
          if (typeof Chart === 'undefined') {
            console.log('Chart.js n√£o carregado, aguardando... (tentativa ' + attempts + ')');
            if (attempts < 50) {
              setTimeout(initChart, 200);
            } else {
              console.error('‚ùå Timeout: Chart.js n√£o carregou ap√≥s 50 tentativas');
            }
            return;
          }
          
          const ctx = document.getElementById('chart_debug-chart-2_1754440098163_6lk75y28z');
          if (!ctx) {
            console.error('‚ùå Canvas chart_debug-chart-2_1754440098163_6lk75y28z n√£o encontrado');
            return;
          }
          
          if (ctx.chart) {
            console.log('üîÑ Destruindo gr√°fico anterior chart_debug-chart-2_1754440098163_6lk75y28z');
            ctx.chart.destroy();
          }
          
          console.log('üöÄ Criando gr√°fico chart_debug-chart-2_1754440098163_6lk75y28z...');
          console.log('üìä Config:', {"type":"bar","data":{"labels":["Janeiro","Fevereiro","Mar√ßo","Abril"],"datasets":[{"label":"Debug Canvas Chart","data":[120,190,300,170],"backgroundColor":["#3B82F6","#10B981","#EF4444","#F59E0B","#8B5CF6","#06B6D4","#F97316","#84CC16"],"borderColor":"#374151","borderWidth":2}]},"options":{"responsive":true,"maintainAspectRatio":true,"aspectRatio":2,"plugins":{"title":{"display":true,"text":"Debug Canvas Chart","font":{"size":18,"weight":"bold"},"color":"#1F2937"},"legend":{"display":false,"position":"bottom"}},"scales":{"y":{"beginAtZero":true,"grid":{"color":"#F3F4F6"},"ticks":{"color":"#6B7280"}},"x":{"grid":{"color":"#F3F4F6"},"ticks":{"color":"#6B7280"}}}}});
          
          try {
            ctx.chart = new Chart(ctx, {"type":"bar","data":{"labels":["Janeiro","Fevereiro","Mar√ßo","Abril"],"datasets":[{"label":"Debug Canvas Chart","data":[120,190,300,170],"backgroundColor":["#3B82F6","#10B981","#EF4444","#F59E0B","#8B5CF6","#06B6D4","#F97316","#84CC16"],"borderColor":"#374151","borderWidth":2}]},"options":{"responsive":true,"maintainAspectRatio":true,"aspectRatio":2,"plugins":{"title":{"display":true,"text":"Debug Canvas Chart","font":{"size":18,"weight":"bold"},"color":"#1F2937"},"legend":{"display":false,"position":"bottom"}},"scales":{"y":{"beginAtZero":true,"grid":{"color":"#F3F4F6"},"ticks":{"color":"#6B7280"}},"x":{"grid":{"color":"#F3F4F6"},"ticks":{"color":"#6B7280"}}}}});
            console.log('‚úÖ Gr√°fico chart_debug-chart-2_1754440098163_6lk75y28z criado com sucesso!');
            
            // Verificar renderiza√ß√£o
            setTimeout(() => {
              try {
                const imageData = ctx.toDataURL();
                console.log('üì∏ Canvas chart_debug-chart-2_1754440098163_6lk75y28z renderizado: ' + imageData.length + ' chars');
                if (imageData.length > 5000) {
                  console.log('‚úÖ Canvas chart_debug-chart-2_1754440098163_6lk75y28z tem conte√∫do visual!');
                } else {
                  console.warn('‚ö†Ô∏è Canvas chart_debug-chart-2_1754440098163_6lk75y28z pode estar vazio');
                }
              } catch (e) {
                console.error('‚ùå Erro ao verificar renderiza√ß√£o chart_debug-chart-2_1754440098163_6lk75y28z:', e);
              }
            }, 1500);
            
          } catch (error) {
            console.error('‚ùå Erro ao criar gr√°fico chart_debug-chart-2_1754440098163_6lk75y28z:', error);
          }
        }
        
        // Aguardar DOM e Chart.js
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', function() {
            console.log('üìÑ DOM carregado para chart_debug-chart-2_1754440098163_6lk75y28z');
            setTimeout(initChart, 200);
          });
        } else {
          console.log('üìÑ DOM j√° carregado para chart_debug-chart-2_1754440098163_6lk75y28z');
          setTimeout(initChart, 200);
        }
      })();
    </script>
  
        
        <div style="margin-top: 40px; padding: 20px; background: white; border-radius: 8px;">
            <h3>üìã Debug Console</h3>
            <div id="console" style="background: #f8f9fa; padding: 15px; border-radius: 4px; font-family: monospace; max-height: 300px; overflow-y: auto;"></div>
        </div>
    </div>
    
    <script>
        // Capturar logs do console
        const originalLog = console.log;
        const originalError = console.error;
        const consoleDiv = document.getElementById('console');
        
        function addToConsole(message, type = 'log') {
            const entry = document.createElement('div');
            entry.style.color = type === 'error' ? '#dc3545' : '#495057';
            entry.style.marginBottom = '5px';
            entry.textContent = '[' + new Date().toLocaleTimeString() + '] ' + message;
            consoleDiv.appendChild(entry);
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
        }
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            addToConsole(args.join(' '), 'log');
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            addToConsole(args.join(' '), 'error');
        };
        
        console.log('üöÄ Debug console ativo');
    </script>
</body>
</html>