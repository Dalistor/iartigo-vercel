<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Chart.js</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h2>Teste Chart.js - Debug</h2>
    
    <div style="margin: 40px 0; text-align: center;">
        <div style="width: 100%; max-width: 700px; margin: 0 auto; background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 25px;">
            <canvas id="testChart" width="700" height="350"></canvas>
        </div>
    </div>

    <div id="log"></div>

    <script>
        function log(message) {
            document.getElementById('log').innerHTML += '<p>' + message + '</p>';
            console.log(message);
        }

        document.addEventListener('DOMContentLoaded', function() {
            log('DOM carregado');
            
            if (typeof Chart !== 'undefined') {
                log('Chart.js carregado');
                
                const ctx = document.getElementById('testChart');
                if (ctx) {
                    log('Canvas encontrado');
                    
                    const chartConfig = {
                        type: 'bar',
                        data: {
                            labels: ['Jan', 'Fev', 'Mar', 'Abr'],
                            datasets: [{
                                label: 'Vendas',
                                data: [12, 19, 3, 17],
                                backgroundColor: ['#3B82F6', '#10B981', '#EF4444', '#F59E0B'],
                                borderColor: '#374151',
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                title: {
                                    display: true,
                                    text: 'Teste Gráfico de Barras',
                                    font: { size: 16, weight: 'bold' }
                                }
                            },
                            scales: {
                                y: { beginAtZero: true },
                                x: { }
                            }
                        }
                    };

                    try {
                        const chart = new Chart(ctx, chartConfig);
                        log('Gráfico criado com sucesso!');
                        
                        // Verificar se renderizou
                        setTimeout(() => {
                            const imageData = ctx.toDataURL();
                            if (imageData.length > 1000) {
                                log('✅ Gráfico renderizado - dados: ' + imageData.length + ' chars');
                            } else {
                                log('❌ Gráfico em branco - dados: ' + imageData.length + ' chars');
                            }
                        }, 1000);
                        
                    } catch (error) {
                        log('❌ Erro ao criar gráfico: ' + error.message);
                    }
                } else {
                    log('❌ Canvas não encontrado');
                }
            } else {
                log('❌ Chart.js não carregado');
            }
        });
    </script>
</body>
</html>
